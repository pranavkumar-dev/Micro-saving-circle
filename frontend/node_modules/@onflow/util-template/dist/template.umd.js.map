{"version":3,"file":"template.umd.js","sources":["../src/template.ts"],"sourcesContent":["import {log} from \"@onflow/util-logger\"\n\n/**\n * Interleaves two arrays\n * @param a - The first array\n * @param b - The second array\n * @param c - The target array\n * @returns The interleaved array\n */\nexport function interleave<A, B>(\n  a: A[] = [],\n  b: B[] = [],\n  c: (A | B)[] = []\n): (A | B)[] {\n  if (!a.length && !b.length) return c\n  if (!a.length) return c\n  if (!b.length) {\n    c.push(...a)\n    return c\n  }\n\n  const [aHead, ...aRest] = a\n  const [bHead, ...bRest] = b\n\n  if (aHead !== undefined) c.push(aHead)\n  if (bHead !== undefined) c.push(bHead)\n\n  return interleave(aRest, bRest, c)\n}\n\n/**\n * Recursively apply a value to a function\n * @param d - The value to apply\n * @returns A function that takes a function and applies the value to it\n */\nfunction recApply<T, U>(d: T): (x: U) => string {\n  return function (arg1) {\n    if (typeof arg1 === \"function\") {\n      log.deprecate({\n        pkg: \"FCL/SDK\",\n        subject: \"Interopolation of functions into template literals\",\n        transition:\n          \"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params\",\n      })\n      return recApply(d)(arg1(d))\n    }\n    return String(arg1)\n  }\n}\n\n/**\n * Creates a template function\n * @param head - A string, template string array, or template function\n * @param rest - The rest of the arguments\n * @returns A template function\n *\n * @example\n * import { template } from \"@onflow/util-template\"\n *\n * // String template\n * const simpleTemplate = template(\"Hello, World!\");\n * console.log(simpleTemplate()); // \"Hello, World!\"\n *\n * // Template literal with interpolation\n * const name = \"Alice\";\n * const greeting = template`Hello, ${name}!`;\n * console.log(greeting()); // \"Hello, Alice!\"\n *\n * // Cadence script template\n * const cadenceScript = template`\n *   access(all) fun main(greeting: String): String {\n *     return greeting.concat(\", from Flow!\")\n *   }\n * `;\n * console.log(cadenceScript()); // The Cadence script as a string\n *\n * // Used with FCL for dynamic Cadence code\n * import * as fcl from \"@onflow/fcl\";\n *\n * const contractAddress = \"0x123456789abcdef0\";\n * const scriptTemplate = fcl.cadence`\n *   import MyContract from ${contractAddress}\n *\n *   access(all) fun main(): String {\n *     return MyContract.getMessage()\n *   }\n * `;\n */\nexport function template(\n  head: string | TemplateStringsArray | ((x?: unknown) => string),\n  ...rest: unknown[]\n): (x?: unknown) => string {\n  if (typeof head === \"string\") return () => head\n  if (typeof head === \"function\") return head\n  return (x: unknown) =>\n    interleave([...head], rest.map(recApply(x)))\n      .join(\"\")\n      .trim()\n}\n"],"names":["interleave","a","arguments","length","undefined","b","c","push","aHead","aRest","bHead","bRest","recApply","d","arg1","log","deprecate","pkg","subject","transition","String","template","head","_len","rest","Array","_key","x","map","join","trim"],"mappings":";;;;;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,SAASA,UAAUA,GAIb;EAAA,EAAA,IAHXC,CAAM,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;EAAA,EAAA,IACXG,CAAM,GAAAH,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;EAAA,EAAA,IACXI,CAAY,GAAAJ,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;IAEjB,IAAI,CAACD,CAAC,CAACE,MAAM,IAAI,CAACE,CAAC,CAACF,MAAM,EAAE,OAAOG,CAAC;EACpC,EAAA,IAAI,CAACL,CAAC,CAACE,MAAM,EAAE,OAAOG,CAAC;EACvB,EAAA,IAAI,CAACD,CAAC,CAACF,MAAM,EAAE;EACbG,IAAAA,CAAC,CAACC,IAAI,CAAC,GAAGN,CAAC,CAAC;EACZ,IAAA,OAAOK,CAAC;EACV,EAAA;EAEA,EAAA,MAAM,CAACE,KAAK,EAAE,GAAGC,KAAK,CAAC,GAAGR,CAAC;EAC3B,EAAA,MAAM,CAACS,KAAK,EAAE,GAAGC,KAAK,CAAC,GAAGN,CAAC;IAE3B,IAAIG,KAAK,KAAKJ,SAAS,EAAEE,CAAC,CAACC,IAAI,CAACC,KAAK,CAAC;IACtC,IAAIE,KAAK,KAAKN,SAAS,EAAEE,CAAC,CAACC,IAAI,CAACG,KAAK,CAAC;EAEtC,EAAA,OAAOV,UAAU,CAACS,KAAK,EAAEE,KAAK,EAAEL,CAAC,CAAC;EACpC;;EAEA;EACA;EACA;EACA;EACA;EACA,SAASM,QAAQA,CAAOC,CAAI,EAAoB;IAC9C,OAAO,UAAUC,IAAI,EAAE;EACrB,IAAA,IAAI,OAAOA,IAAI,KAAK,UAAU,EAAE;QAC9BC,cAAG,CAACC,SAAS,CAAC;EACZC,QAAAA,GAAG,EAAE,SAAS;EACdC,QAAAA,OAAO,EAAE,oDAAoD;EAC7DC,QAAAA,UAAU,EACR;EACJ,OAAC,CAAC;QACF,OAAOP,QAAQ,CAACC,CAAC,CAAC,CAACC,IAAI,CAACD,CAAC,CAAC,CAAC;EAC7B,IAAA;MACA,OAAOO,MAAM,CAACN,IAAI,CAAC;IACrB,CAAC;EACH;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,SAASO,QAAQA,CACtBC,IAA+D,EAEtC;IAAA,KAAA,IAAAC,IAAA,GAAArB,SAAA,CAAAC,MAAA,EADtBqB,IAAI,OAAAC,KAAA,CAAAF,IAAA,GAAA,CAAA,GAAAA,IAAA,WAAAG,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA,EAAA,EAAA;EAAJF,IAAAA,IAAI,CAAAE,IAAA,GAAA,CAAA,CAAA,GAAAxB,SAAA,CAAAwB,IAAA,CAAA;EAAA,EAAA;EAEP,EAAA,IAAI,OAAOJ,IAAI,KAAK,QAAQ,EAAE,OAAO,MAAMA,IAAI;EAC/C,EAAA,IAAI,OAAOA,IAAI,KAAK,UAAU,EAAE,OAAOA,IAAI;IAC3C,OAAQK,CAAU,IAChB3B,UAAU,CAAC,CAAC,GAAGsB,IAAI,CAAC,EAAEE,IAAI,CAACI,GAAG,CAAChB,QAAQ,CAACe,CAAC,CAAC,CAAC,CAAC,CACzCE,IAAI,CAAC,EAAE,CAAC,CACRC,IAAI,EAAE;EACb;;;;;;;;;"}